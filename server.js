const { OTManager, arrayToChoiceBits } = require('./index');

const ot = new OTManager(true, false);

ot.connect("127.0.0.1:12345");

const data = [
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
  0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10,
  0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11,
];

console.log('is connected:', ot.isConnected());
console.log('is server:', ot.isServer());

console.time('ot example');
ot.respondWithData(Uint8Array.from(data));
console.timeEnd('ot example');

const dataFromClient = ot.requestData(...arrayToChoiceBits([0, 1]));

console.log('data from client: ', dataFromClient);
